<%- include('../partials/header') %>

<section class="details-page">
    <div>Airline: </div>
    <div><%= flight.airline %></div>
    <div>Airport: </div>
    <div><%= flight.airport %></div>
    <div>FlightNo: </div>
    <div><%= flight.flightNo %></div>
    <div>Departure Date & Time: </div>
    <div><%= flight.departs %></div>
    </section>
<section class="details-page">
    <% if (flight.destinations.length) { %>
        <h2>Flight Destination Information</h2>
        <br>
        <% flight.destinations.forEach(function(destination) { %>
        <div>Airport: </div>
        <div><%= destination.airport %></div>
        <div>Arrival: </div>
        <div><%= destination.arrival %></div>
        <% }); %>
    </br>
<section class="destination-form">
    <form id="add-destinations-form" method="POST" action="/flights/<%= flight._id %>/destinations">
        <label>Airport: </label>
            <select name="airport" value="DEN">
                <option value="none" selected disabled hidden>Select One</option>
                <option value="AUS">AUS</option>
                <option value="DFW">DFW</option>
                <option value="DEN">DEN</option>
                <option value="LAX">LAX</option>
                <option value="SAN">SAN</option>
            </select>
            <br>
        <label>Arrival Date & Time: </label>
                <input type="datetime-local" name="arrival" value="<%= new Date() %>">
                <input type="submit" value="Add Destinations">
            </form>
        </section>
        <% } else { %>
    <h2>Add Destination</h2>
</br>
<section class="destination-form">
<form id="add-destinations-form" method="POST" action="/flights/<%= flight._id %>/destinations">
    <label>Airport: </label>
        <select name="airport" value="DEN">
            <option value="none" selected disabled hidden>Select One</option>
            <option value="AUS">AUS</option>
            <option value="DFW">DFW</option>
            <option value="DEN">DEN</option>
            <option value="LAX">LAX</option>
            <option value="SAN">SAN</option>
        </select>
        <br>
    <label>Arrival Date & Time: </label>
            <input type="datetime-local" name="arrival" value="<%= new Date() %>">
            <input type="submit" value="Add Destinations">
        </form>
        <% } %>
</section>
</br>
<div>Tickets: </div>
<ul>
    <%- flight.tickets.map(ticket =>
     `<li>${ticket.seat} <small>${ticket.price}</small></li>`
).join('') %>
</ul>
<br>
<div>Add New Ticket</div>
<form id="add-ticket" method="Post" action="/tickets">
    <label>Seat Number: </label>
    <input type="text" name="seat">
    <label>Price: </label>
    <input type="number" name="price">
    <input type="submit" value="Add Ticket">
</form>
    <%- include('../partials/footer') %>